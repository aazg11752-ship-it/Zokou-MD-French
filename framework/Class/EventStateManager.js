const a63_0x6b7618=a63_0x2f3f;(function(_0x24a264,_0x464aab){const _0x131d70=a63_0x2f3f,_0x15ce72=_0x24a264();while(!![]){try{const _0x42fdf6=parseInt(_0x131d70(0x1be))/0x1+-parseInt(_0x131d70(0x19e))/0x2+parseInt(_0x131d70(0x1ab))/0x3*(parseInt(_0x131d70(0x1b1))/0x4)+-parseInt(_0x131d70(0x1ba))/0x5*(-parseInt(_0x131d70(0x197))/0x6)+parseInt(_0x131d70(0x1c0))/0x7+parseInt(_0x131d70(0x1ad))/0x8*(parseInt(_0x131d70(0x1cb))/0x9)+-parseInt(_0x131d70(0x1a0))/0xa;if(_0x42fdf6===_0x464aab)break;else _0x15ce72['push'](_0x15ce72['shift']());}catch(_0x149f8f){_0x15ce72['push'](_0x15ce72['shift']());}}}(a63_0x2c05,0xc3208));const a63_0x112a12=(function(){let _0x3de99e=!![];return function(_0x13bec0,_0x43f02a){const _0x1dfd38=_0x3de99e?function(){const _0x37eb49=a63_0x2f3f;if(_0x43f02a){const _0x34f25a=_0x43f02a[_0x37eb49(0x1b7)](_0x13bec0,arguments);return _0x43f02a=null,_0x34f25a;}}:function(){};return _0x3de99e=![],_0x1dfd38;};}()),a63_0x888995=a63_0x112a12(this,function(){const _0xbda8bd=a63_0x2f3f;return a63_0x888995['toString']()['search']('(((.+)+)+)+$')[_0xbda8bd(0x1a1)]()['constructor'](a63_0x888995)['search']('(((.+)+)+)+$');});a63_0x888995();function a63_0x2f3f(_0x9268e6,_0x2db754){const _0xc19fce=a63_0x2c05();return a63_0x2f3f=function(_0x888995,_0x112a12){_0x888995=_0x888995-0x18f;let _0x2c0594=_0xc19fce[_0x888995];if(a63_0x2f3f['LFSumF']===undefined){var _0x2f3fea=function(_0x282779){const _0x2816c3='abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=';let _0x39c771='',_0x2814da='',_0x1cc565=_0x39c771+_0x2f3fea;for(let _0xf22dd9=0x0,_0x29256f,_0x30a289,_0xd93e15=0x0;_0x30a289=_0x282779['charAt'](_0xd93e15++);~_0x30a289&&(_0x29256f=_0xf22dd9%0x4?_0x29256f*0x40+_0x30a289:_0x30a289,_0xf22dd9++%0x4)?_0x39c771+=_0x1cc565['charCodeAt'](_0xd93e15+0xa)-0xa!==0x0?String['fromCharCode'](0xff&_0x29256f>>(-0x2*_0xf22dd9&0x6)):_0xf22dd9:0x0){_0x30a289=_0x2816c3['indexOf'](_0x30a289);}for(let _0x154735=0x0,_0x37a74b=_0x39c771['length'];_0x154735<_0x37a74b;_0x154735++){_0x2814da+='%'+('00'+_0x39c771['charCodeAt'](_0x154735)['toString'](0x10))['slice'](-0x2);}return decodeURIComponent(_0x2814da);};a63_0x2f3f['qhsgix']=_0x2f3fea,_0x9268e6=arguments,a63_0x2f3f['LFSumF']=!![];}const _0xdd5da3=_0xc19fce[0x0],_0x5a98a3=_0x888995+_0xdd5da3,_0x5bbf5d=_0x9268e6[_0x5a98a3];if(!_0x5bbf5d){const _0xfb6c7f=function(_0x3d5546){this['dhHEet']=_0x3d5546,this['ErIaga']=[0x1,0x0,0x0],this['eJCDtA']=function(){return'newState';},this['gIhIBI']='\x5cw+\x20*\x5c(\x5c)\x20*{\x5cw+\x20*',this['JluClW']='[\x27|\x22].+[\x27|\x22];?\x20*}';};_0xfb6c7f['prototype']['bagZgv']=function(){const _0xead27a=new RegExp(this['gIhIBI']+this['JluClW']),_0x4d1a3a=_0xead27a['test'](this['eJCDtA']['toString']())?--this['ErIaga'][0x1]:--this['ErIaga'][0x0];return this['RZUaxP'](_0x4d1a3a);},_0xfb6c7f['prototype']['RZUaxP']=function(_0x3c7e12){if(!Boolean(~_0x3c7e12))return _0x3c7e12;return this['qDJSOb'](this['dhHEet']);},_0xfb6c7f['prototype']['qDJSOb']=function(_0x4127ea){for(let _0x2645c4=0x0,_0x3cdcae=this['ErIaga']['length'];_0x2645c4<_0x3cdcae;_0x2645c4++){this['ErIaga']['push'](Math['round'](Math['random']())),_0x3cdcae=this['ErIaga']['length'];}return _0x4127ea(this['ErIaga'][0x0]);},new _0xfb6c7f(a63_0x2f3f)['bagZgv'](),_0x2c0594=a63_0x2f3f['qhsgix'](_0x2c0594),_0x9268e6[_0x5a98a3]=_0x2c0594;}else _0x2c0594=_0x5bbf5d;return _0x2c0594;},a63_0x2f3f(_0x9268e6,_0x2db754);}function a63_0x2c05(){const _0x796ca5=['C2v0','q2v0DguGy29TBwfUzguGzxn0ihjLC2vYDMvYihvUAxf1zw1LBNqGCg91CIbSzxmGz3jVDxbLCW','sMLKia','igvZDcbTywLUDgvUyw50igrLC2fJDgL2zq','ihvWzgf0zwqGD2L0AcbHy3rPB24G','z2v0','igfJDgLVBI8','idOGCg91CIbJAgfUz2vYigWNywn0Aw9UigvUia','Dg9mB3DLCKnHC2u','zxjYB3i','BM9U','ndy4nJiZng9JCxLuAG','ywn0Aw9U','cIaGicaGicaGicbjtLnfuLqGsu5utYa','reHpsuq','zgvSzxrL','lI4VlI4VyMrKl19PBMrLEa','rxjYB3iGz2v0DgLUzYbHy3rPB24GzM9YigPPzca','mZeYnde0ngn1wgDWtW','vgvKCw0','mtiZodeYnJbLz0rtueq','Dg9tDhjPBMC','qunusu9ouW','C3rHCNrZv2L0Aa','rxjYB3iGDxbKyxrPBMCGAMLKia','ifDirvjfigPPzca9id87','DhjPBq','u0vmrunuigfJDgLVBIbguK9nia','AM9PBG','B3vP','tcDHy3rPB24G','mJq4mdy4nwnsAwXwqG','igvZDcbTywLUDgvUyw50ia','mtu0mJG4BMnguvfj','CMv0AxjLCG','icHQAwqSigv0yxqPiaOGicaGicaGifzbtfvfuYaOpYWGpYKkicaGicaGicbptIbdt05gteLdvcHQAwqPierpifvqrefursbtrvqGzxrHDca9igv4y2X1zgvKlMv0yxq7cIaGicaGicaG','igvZDcbKzwPHigrLC2fJDgL2zq','nhrwufz3tG','idOGCg91CIbSzsbKzxnHy3rPDMvYcG','C3bSAxq','u1rbvevt','CMvTB3zL','CNvU','yxbWBhK','igvZDcbTywLUDgvUyw50igfJDgLM','D2fYBG','mtbwAuvJv3G','iIWkicaGicaGicaGigfJDgLVBIburvHuie5pvcbovuXmierfrKfvtfqGiG','z2vUzxjHDgvdBwq','Ee9hDeW','ntG4mZK1CKD4uu9X','zgLZywjSzwq','mZq0mJznzxDNqvC','zw5HyMXLzezVCKPPza','igzVCIbQAwqG','q3z6uxq','ig4Nzxn0ihbHCYb2ywXPzguUieXLCYbHy3rPB25ZihzHBgLKzxmGC29UDdOG','Bg9N','idOGCg91CIbSj2fJDgL2zxik','vw5LigvYCMv1CIbLC3qGC3vYDMvUDwuGlcb2zwLSBgv6ig5VDxmGzw4GAw5MB3jTzxOGC3vYigXLigzVCNvTihnPihbLCMnPC3rHBNq','vM91CYbUj2f2zxOGCgfZigXLCYbWzxjTAxnZAw9UCYbUzwnLC3nHAxjLCW','ChjLCgfYzq','zxrHDa','mJG4CfLzz0fi','zxHWB3j0CW'];a63_0x2c05=function(){return _0x796ca5;};return a63_0x2c05();}const NodeCache=require('node-cache'),initializeDb=require(a63_0x6b7618(0x19c)),{zokou}=require('../zokou');class EventStateManager{#tableName;#db=initializeDb();['STATES']={'enabled':a63_0x6b7618(0x1a9),'disabled':a63_0x6b7618(0x196)};['ACTIONS']={'remove':a63_0x6b7618(0x1ae),'delete':'supp','warn':a63_0x6b7618(0x1b9)};#defaultAction=this['ACTIONS']['remove'];#defaultState=this[a63_0x6b7618(0x1b4)][a63_0x6b7618(0x1bf)];#cache;constructor(_0x282983,_0x5a7ae6=new NodeCache()){this.#tableName=_0x282983,this.#cache=_0x5a7ae6,this.#createTable();}#createTable(){const _0x1d60c9=a63_0x6b7618;this.#db[_0x1d60c9(0x1c9)]('\x0a\x20\x20\x20\x20\x20\x20\x20\x20CREATE\x20TABLE\x20IF\x20NOT\x20EXISTS\x20'+this.#tableName+'\x20(\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20jid\x20TEXT\x20PRIMARY\x20KEY,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20etat\x20TEXT\x20NOT\x20NULL\x20DEFAULT\x20\x22'+this.#defaultState+_0x1d60c9(0x1bb)+this.#defaultAction+'\x22\x0a\x20\x20\x20\x20\x20\x20\x20\x20)\x0a\x20\x20\x20\x20\x20\x20')['run']();}#addOrUpdateJid(_0x4745cd,_0x3ad8d8=this.#defaultState){const _0x1ce354=a63_0x6b7618;this.#db[_0x1ce354(0x1c9)]('\x0a\x20\x20\x20\x20\x20\x20\x20\x20INSERT\x20INTO\x20'+this.#tableName+_0x1ce354(0x1af))[_0x1ce354(0x1b6)](_0x4745cd,_0x3ad8d8);const _0x5437a6=this.#cache['get'](_0x4745cd)||{};this.#cache['set'](_0x4745cd,{..._0x5437a6,'etat':_0x3ad8d8});}#updateJidAction(_0x224d24,_0x17479e=this.#defaultAction){const _0x42b340=a63_0x6b7618;try{this.#db[_0x42b340(0x1c9)](_0x42b340(0x199)+this.#tableName+'\x20(jid,\x20action)\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20VALUES\x20(?,\x20?)\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20ON\x20CONFLICT(jid)\x20DO\x20UPDATE\x20SET\x20action\x20=\x20excluded.action;\x0a\x20\x20\x20\x20\x20\x20\x20\x20')['run'](_0x224d24,_0x17479e);const _0x2ef1bd=this.#cache[_0x42b340(0x191)](_0x224d24)||{};this.#cache['set'](_0x224d24,{..._0x2ef1bd,'action':_0x17479e}),console['log'](_0x42b340(0x1cf)+_0x224d24+_0x42b340(0x190)+_0x17479e);}catch(_0x4c9cf1){console[_0x42b340(0x195)](_0x42b340(0x1a4)+_0x224d24+'\x20with\x20action\x20'+_0x17479e+':',_0x4c9cf1);throw _0x4c9cf1;}}['enabledForJid'](_0x431e69){const _0x4f1949=a63_0x6b7618;try{const _0x2b536a=this.#cache['get'](_0x431e69);if(_0x2b536a?.['etat']!==undefined){if('yxWRm'===_0x4f1949(0x1c3)){if(_0x1d3190){const _0x585559=_0x1b5df2[_0x4f1949(0x1b7)](_0x3c9b54,arguments);return _0x436887=null,_0x585559;}}else return _0x2b536a['etat']!==this.#defaultState;}const _0x5a275d=this.#db['prepare']('SELECT\x20etat\x20FROM\x20'+this.#tableName+'\x20WHERE\x20jid\x20=\x20?;')['get'](_0x431e69);if(_0x5a275d)return this.#cache['set'](_0x431e69,{...this.#cache[_0x4f1949(0x191)](_0x431e69)||{},'etat':_0x5a275d[_0x4f1949(0x1ca)]}),_0x5a275d['etat']!==this.#defaultState;return![];}catch(_0xb9ce0){return console[_0x4f1949(0x195)]('Error\x20checking\x20enabled\x20state\x20for\x20jid\x20'+_0x431e69+':',_0xb9ce0),![];}}['getActionForJid'](_0x35a0b3){const _0x5cc91d=a63_0x6b7618;try{const _0x96f7f3=this.#cache['get'](_0x35a0b3);if(_0x96f7f3?.['action'])return _0x96f7f3[_0x5cc91d(0x198)];const _0x4f9e52=this.#db['prepare'](_0x5cc91d(0x1a7)+this.#tableName+_0x5cc91d(0x1a5))[_0x5cc91d(0x191)](_0x35a0b3);if(_0x4f9e52)return this.#cache[_0x5cc91d(0x1cd)](_0x35a0b3,{...this.#cache[_0x5cc91d(0x191)](_0x35a0b3)||{},'action':_0x4f9e52[_0x5cc91d(0x198)]}),_0x4f9e52[_0x5cc91d(0x198)];return this.#defaultAction;}catch(_0x5ecd04){console['error'](_0x5cc91d(0x19d)+_0x35a0b3+':',_0x5ecd04);throw _0x5ecd04;}}[a63_0x6b7618(0x1bc)](_0x8e8299){const _0x104628={'DHOID':function(_0x1a8814,_0x3f38d5){return _0x1a8814(_0x3f38d5);},'jEYxb':function(_0x7d7194,_0x43280d){return _0x7d7194&&_0x43280d;},'wFofC':function(_0x2ef206,_0x45ee00){return _0x2ef206==_0x45ee00;},'xOGtL':function(_0x360b43,_0x49acdf){return _0x360b43(_0x49acdf);},'Tedqm':function(_0x48ae3c,_0x49518d){return _0x48ae3c(_0x49518d);},'DXGYQ':function(_0x297df9,_0x57efbf){return _0x297df9(_0x57efbf);}},{nomCom:_0x8bfbb2,categorie:_0x22d626,desc:_0x5b469e,alias:_0x5c2427,reaction:_0x174efc}=_0x8e8299;zokou({'nomCom':_0x8bfbb2,'categorie':_0x22d626,'reaction':_0x174efc,'desc':_0x5b469e,'alias':_0x5c2427},async(_0x369026,_0x3be0cb,_0x327a99)=>{const _0x9a6125=a63_0x2f3f,{verifGroupe:_0x15b17a,verifAdmin:_0x754082,ms:_0x3c8486,arg:_0x628bec,superUser:_0x50b9c7,repondre:_0x234356}=_0x327a99;if(!_0x15b17a)return _0x104628[_0x9a6125(0x19a)](_0x234356,_0x9a6125(0x1ce));if(_0x104628['jEYxb'](!_0x50b9c7,!_0x754082))return _0x234356(_0x9a6125(0x1c8));try{const _0x2edbc2='\x0a'+_0x8bfbb2+'\x20'+this[_0x9a6125(0x1b4)]['enabled']+_0x9a6125(0x1c6)+_0x8bfbb2+'\x20'+this[_0x9a6125(0x1b4)]['disabled']+_0x9a6125(0x1b2)+_0x8bfbb2+'\x20action/'+this[_0x9a6125(0x1a2)][_0x9a6125(0x1b5)]+'\x20:\x20pour\x20changer\x20l\x27action\x20en\x20'+this[_0x9a6125(0x1a2)]['remove']+'\x0a'+_0x8bfbb2+_0x9a6125(0x192)+this[_0x9a6125(0x1a2)][_0x9a6125(0x19b)]+_0x9a6125(0x193)+this['ACTIONS'][_0x9a6125(0x1b5)]+'\x0a'+_0x8bfbb2+'\x20action/'+this[_0x9a6125(0x1a2)]['warn']+_0x9a6125(0x193)+this[_0x9a6125(0x1a2)][_0x9a6125(0x1b5)]+'\x0a'+_0x8bfbb2+'\x20'+this['ACTIONS']['remove']+'\x20'+this[_0x9a6125(0x1b4)]['enabled']+'\x20:\x20pour\x20activer\x20et\x20changer\x20l\x27action\x20en\x20retirer';if(!_0x628bec||!_0x628bec[0x0]||_0x628bec[_0x9a6125(0x1a8)]('')[_0x9a6125(0x1a6)]()=='')return _0x104628['DHOID'](_0x234356,_0x2edbc2);const _0x3b0bb1=_0x628bec[0x0][_0x9a6125(0x194)]();if(_0x3b0bb1==this['STATES']['enabled']){if(this['enabledForJid'](_0x369026))return _0x234356(_0x8bfbb2+'\x20est\x20deja\x20actif');return this.#addOrUpdateJid(_0x369026,_0x3b0bb1),_0x234356(_0x8bfbb2+_0x9a6125(0x1b8));}else{if(_0x104628['wFofC'](_0x3b0bb1,this[_0x9a6125(0x1b4)]['disabled'])){if(!this[_0x9a6125(0x1c1)](_0x369026))return _0x234356(_0x8bfbb2+_0x9a6125(0x1b0));return this.#addOrUpdateJid(_0x369026,_0x3b0bb1),_0x234356(_0x8bfbb2+_0x9a6125(0x18f));}else{if(_0x3b0bb1[_0x9a6125(0x1a3)]('action/')){const _0x1de268=_0x3b0bb1[_0x9a6125(0x1b3)]('/')[0x1]['trim']()[_0x9a6125(0x194)]();if(!Object['values'](this['ACTIONS'])['includes'](_0x1de268))return _0x104628[_0x9a6125(0x1bd)](_0x234356,_0x9a6125(0x1aa)+_0x1de268+_0x9a6125(0x1c4)+Object['values'](this['ACTIONS'])['join'](',\x20'));return this.#updateJidAction(_0x369026,_0x1de268),_0x104628[_0x9a6125(0x19f)](_0x234356,'L\x27action\x20de\x20'+_0x8bfbb2+_0x9a6125(0x1ac)+_0x1de268);}else return _0x104628['DXGYQ'](_0x234356,_0x2edbc2);}}}catch(_0x406c43){return console[_0x9a6125(0x1c5)]('Error\x20setting\x20'+_0x8bfbb2+_0x9a6125(0x1c2)+_0x369026+':\x20'+_0x406c43),_0x234356(_0x9a6125(0x1c7));}});}}module[a63_0x6b7618(0x1cc)]=EventStateManager;